# Integration test configuration for keychain server

server:
  host: "0.0.0.0"
  rest_port: 8443
  grpc_port: 9443
  quic_port: 8444
  mcp_port: 9444

protocols:
  rest: true
  grpc: true
  quic: true
  mcp: true

logging:
  level: "debug"
  format: "json"

# TLS disabled for integration tests
tls:
  enabled: false

# Auth disabled for integration tests
auth:
  enabled: false

ratelimit:
  enabled: false

metrics:
  enabled: true
  path: "/metrics"
  port: 9090

health:
  enabled: true
  path: "/health"

# Storage configuration
storage:
  backend: "filesystem"
  path: "/data/keychain"

# Default backend for key operations
default_backend: "pkcs8"

# Backend configurations
backends:
  pkcs8:
    enabled: true
    path: "/data/keychain/pkcs8"

  tpm2:
    enabled: false  # Disabled by default, can be enabled per test
    device_path: "tcp://swtpm:2321"

  pkcs11:
    enabled: false  # Disabled by default, can be enabled per test
    library: "/usr/local/lib/softhsm/libsofthsm2.so"
    token: "test-token"
    pin: "123456"
